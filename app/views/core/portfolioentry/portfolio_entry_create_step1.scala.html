@* LICENSE
 *
 * Copyright (c) 2015, The Agile Factory SA and/or its affiliates. All rights
 * reserved.
 *
 * This program is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program. If not, see <http://www.gnu.org/licenses/>.
 *@
@(newPortfolioEntryForm: Form[utils.form.PortfolioEntryCreateFormData])

@import helper._
@import bootstrap3._
@import framework_views.parts
@import framework_views.parts.formats._

@templates.main_bc_nosidebar(
    parts.Msg.asString("core.portfolio_entry.create.title"),
    Seq(
        ("core.portfolio_entry.create.breadcrumb",null)
    )
){
}{
    <div class="row">
    
        <div class="col-md-8">
    
            @if(newPortfolioEntryForm.hasErrors()){
                <div class="alert alert-danger">
                <strong>@parts.Msg("standard.form.error.title")</strong><br/>
                </div>
            }
            
            @helper.form(action = controllers.core.routes.PortfolioEntryController.processCreateStep1(), 'enctype -> "multipart/form-data", 'id -> "create-portfolio-entry-form") {
            
                @parts.checkbox(newPortfolioEntryForm("isConfidential"), parts.Msg.asString("object.portfolio_entry.is_condfidential.label"), parts.Msg.asString("object.portfolio_entry.is_condfidential.help"))
                 
                @parts.input_text(newPortfolioEntryForm("name"),'_showConstraints -> false, '_label -> parts.Msg.asString("object.portfolio_entry.name.label"))
                
                @helper.textarea(newPortfolioEntryForm("description"),'_showConstraints -> false, '_label -> parts.Msg.asString("object.portfolio_entry.description.label"))
                
                @parts.singlevalue_picker(newPortfolioEntryForm("portfolio"),parts.Msg.asString("object.portfolio_entry.portfolio.label"),controllers.routes.PickerController.portfolio().url)
                
                @parts.dropdownlist(newPortfolioEntryForm("portfolioEntryType"),parts.Msg.asString("object.portfolio_entry.type.label"), dao.pmo.PortfolioEntryDao.getPETypeActiveAsVH(), null, false)
                
                @parts.dropdownlist(newPortfolioEntryForm("requestedLifeCycleProcess"),parts.Msg.asString("object.portfolio_entry.life_cycle_process.label"), dao.governance.LifeCycleProcessDao.getLCProcessActiveAsVH, null, false)
                
                @parts.singlevalue_picker(
                    newPortfolioEntryForm("manager"), 
                    parts.Msg.asString("object.portfolio_entry.manager.label"),
                    controllers.routes.PickerController.manager().url
                )
                
                @parts.file_field(newPortfolioEntryForm("scopeDescription"),Messages("object.portfolio_entry.scope_description.label"))

                <input id="submit" type="submit" value="@parts.Msg("button.submit")" class="btn btn-primary">
            }
    
        </div>
        <div class="col-md-4 hidden-xs hidden-sm">
        
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="glyphicons glyphicons-circle-info"></i>&nbsp; @parts.Msg("core.portfolio_entry.create.help.portfolioentrytype.title")</h3>
                </div>
                <div class="panel-body">
                    @for(portfolioEntryType <- dao.pmo.PortfolioEntryDao.getPETypeActiveAsList()) {
                        @if(portfolioEntryType.description != null && !portfolioEntryType.description.equals("")) {
                            @display_value_holder(portfolioEntryType) <br/><br/>
                        }
                    }
                </div>
            </div>
            
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="glyphicons glyphicons-circle-info"></i>&nbsp; @parts.Msg("core.portfolio_entry.create.help.lifecycleprocess.title")</h3>
                </div>
                <div class="panel-body">
                    @for(lifeCycleProcess <- dao.governance.LifeCycleProcessDao.getLCProcessActiveAsList) {
                        @if(lifeCycleProcess.description != null && !lifeCycleProcess.description.equals("")) {
                            @display_value_holder(lifeCycleProcess) <br/><br/>
                        }
                    }
                </div>
            </div>
        
        </div>
    
    </div>
}