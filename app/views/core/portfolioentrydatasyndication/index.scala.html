@* LICENSE
 *
 * Copyright (c) 2015, The Agile Factory SA and/or its affiliates. All rights
 * reserved.
 *
 * This program is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program. If not, see <http://www.gnu.org/licenses/>.
 *@
@(
    portfolioEntry: models.pmo.PortfolioEntry,
    slaveAgreementLinks: List[services.datasyndication.models.DataSyndicationAgreementLink],
    masterAgreementLinks: List[services.datasyndication.models.DataSyndicationAgreementLink],
    masterAgreements: List[services.datasyndication.models.DataSyndicationAgreement]
)

@import framework_views.parts.formats._
@import be.objectify.deadbolt.java.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._
@import framework_views.parts
@import views.html.modelsparts._

@breadcrump=@{
    Seq(
        (display_portfolio_entry(portfolioEntry, false).toString, controllers.core.routes.PortfolioEntryController.overview(portfolioEntry.id).url),
        ("core.portfolio_entry.sidebar.integration.data_syndication.label", null)
    )
}

@views.html.core.portfolioentry.portfolio_entry_template(portfolioEntry, controllers.core.PortfolioEntryController.MenuItemType.INTEGRATION, breadcrump){


    @if(slaveAgreementLinks.size == 0 && masterAgreementLinks.size == 0) {
    
        @if(masterAgreements.size == 0) {
            <p>There is no master agreements registered for this BizDock instance. Please follow this 
            <a href="@controllers.admin.routes.DataSyndicationController.searchPartner().url">link</a>
            to submit a new agreement request (specific permissions are required).</p>
        } else {
            <p>This initiative is currently not shared with another BizDock instance. Simply select a partner to request a new relation.</p>
            
            <div class="row">
            @for(masterAgreement <- masterAgreements) {
                <div class="col-md-2 text-center">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <div><img src="https://www.bizdock.io/wp-content/uploads/2015/06/redmine.png" style="max-width:140px;"></div>
                            <h4>Partner 1</h4>
                            <a class="btn btn-warning" href="#TODO"><span class="glyphicons glyphicons-share-alt"></span> Share</a>
                        </div>
                    </div>
                </div>
            }
            </div>
        }
    
    } else {
    
        <div class="row">
        
            <div class="col-md-4" style="display: inline-block; vertical-align: middle; float: none;">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Consume from
                    </div>
                    <div class="panel-body ">
                        
                        <div class="col-md-2"></div>
                        <div class="col-md-8 text-center">
                            <div class="panel panel-warning">
                                <div class="panel-heading">
                                    <div><img src="https://www.bizdock.io/wp-content/uploads/2015/06/redmine.png" style="max-width:140px;"></div>
                                    <h4>Partner 1</h4>
                                    <small>Link name</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2"></div>
                        
                        <div class="col-md-2"></div>
                        <div class="col-md-8 text-center">
                            <div class="panel panel-warning">
                                <div class="panel-heading">
                                    <div><img src="https://www.bizdock.io/wp-content/uploads/2015/06/redmine.png" style="max-width:140px;"></div>
                                    <h4>Partner 2</h4>
                                    <small>Link name</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2"></div>
                        
                    </div>
                </div>
            </div><!--
    
            --><div class="col-md-1 text-center" style="display: inline-block; vertical-align: middle; float: none;">
                <span style="margin-top:-15px;font-size:30px;" class="glyphicons glyphicons-right-arrow"></span>
            </div><!--
    
            --><div class="col-md-2 text-center" style="display: inline-block; vertical-align: middle; float: none;">
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4>@portfolioEntry.getName</h4>
                    </div>
                </div> 
            </div><!--
            
            --><div class="col-md-1 text-center" style="display: inline-block; vertical-align: middle; float: none;">
                <span style="margin-top:-15px;font-size:30px;" class="glyphicons glyphicons-right-arrow"></span>
            </div><!--
            
            --><div class="col-md-4" style="display: inline-block; vertical-align: middle; float: none;">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Provide to
                        <div class="pull-right">
                            <a href="#TODO"><span class="glyphicons glyphicons-plus glyphicons-panel"></span></a>
                        </div>
                    </div>
                    <div class="panel-body ">
                    
                        <div class="col-md-2"></div>
                        <div class="col-md-8 text-center">
                            <div class="panel panel-warning">
                                <div class="panel-heading">
                                    <div><img src="https://www.bizdock.io/wp-content/uploads/2015/06/redmine.png" style="max-width:140px;"></div>
                                    <h4>Partner</h4>
                                    <small>Link name</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2"></div>
                        
                    </div>
                </div>
            </div>
        
        </div>
    
    }

}