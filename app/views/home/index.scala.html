@* LICENSE
 *
 * Copyright (c) 2015, The Agile Factory SA and/or its affiliates. All rights
 * reserved.
 *
 * This program is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program. If not, see <http://www.gnu.org/licenses/>.
 *@
@(
    title: String,
    notificationsTable: framework.utils.Table[utils.table.NotificationListView],
    portfolioEntries: List[models.pmo.PortfolioEntry],
    userAccount: framework.services.account.IUserAccount,
    hasActor: Boolean
) 

@import commons._
@import framework_views.parts
@import be.objectify.deadbolt.java.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._

@templates.main_nosidebar(title) { 

}{
<div class="row">
    <div class="col-md-12">

        @if(!hasActor) {
            <div class="alert alert-info">@parts.Msg("index.noemployee.notif")</div>
        }

        <div class="row">
        
            <div class="col-md-8">
                
                @if(_notificationService.isInternalSendingSystem) {
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">@parts.Msg("index.notifications.title")</h3>
                        </div>
                        <div class="panel-body">
                             @parts.table.tableview(notificationsTable)
                        </div>
                    </div>
                }
                
                
                <div class="row">
                    
                    <div class="col-md-6">
                        <div class="panel panel-danger">
                            <div class="panel-heading">
                                <h3 class="panel-title">@parts.Msg("index.initiatives.title")</h3>
                            </div>
                            <div class="list-group">
                                @if(portfolioEntries != null && portfolioEntries.size > 0) {
                                    @for(portfolioEntry <- portfolioEntries) {
                                        <a class="list-group-item" href="@controllers.core.routes.PortfolioEntryController.overview(portfolioEntry.id).url">@portfolioEntry.name</a>
                                    }
                                } else {
                                    <a class="list-group-item" href="@controllers.core.routes.PortfolioEntryController.createStep1().url">@parts.Msg("index.initiatives.create")</a>
                                }
                            </div>
                        </div>
                    </div>
                
                    <div class="col-md-6">
                    
                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h3 class="panel-title"><i class="glyphicons glyphicons-circle-info"></i>&nbsp; @parts.Msg("index.help.title")</h3>
                            </div>
                            <div class="list-group">
                                <a class="list-group-item" target="_blank" href="https://help.bizdock.io/doku.php?id=resources:what-is-bizdock"><span class="glyphicons glyphicons-eye-open"></span> @parts.Msg("index.help.bizdock.label")</a>
                                <a class="list-group-item" target="_blank" href="https://help.bizdock.io/doku.php?id=user-guide:initiative:create-initiative"><span class="glyphicons glyphicons-gift"></span> @parts.Msg("index.help.intake.label")</a>
                                <a class="list-group-item" target="_blank" href="https://help.bizdock.io/doku.php?id=user-guide:roadmap"><span class="glyphicons glyphicons-road"></span> @parts.Msg("index.help.roadmap.label")</a>
                                <a class="list-group-item" target="_blank" href="https://help.bizdock.io/doku.php?id=user-guide:cockpit"><span class="glyphicons glyphicons-dashboard"></span> @parts.Msg("index.help.cockpit.label")</a>
                                <a class="list-group-item" target="_blank" href="https://help.bizdock.io/doku.php?id=user-guide:my-account"><span class="glyphicons glyphicons-nameplate"></span> @parts.Msg("index.help.profile.label")</a>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

            <div class="col-md-4">
            
                <div class="panel panel-success">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            @parts.Msg("index.profile.title")
                            <div class="pull-right">
                                <a href="@controllers.admin.routes.MyAccount.display()"><span class="glyphicons glyphicons-new-window "></span></a>
                            </div>
                        </h3>
                    </div>
                    <div class="panel-body">
                        <table class="table table-condensed table-hover">
                            <tbody>
                                <tr>
                                    <th class="col-md-4">
                                        @parts.Msg("object.user_account.first_name.label")</th>
                                    <td>@userAccount.getFirstName()</td>
                                </tr>
                                <tr>
                                    <th class="col-md-4">
                                        @parts.Msg("object.user_account.last_name.label")</th>
                                    <td>@userAccount.getLastName()</td>
                                </tr>
                                <tr>
                                    <th class="col-md-4">
                                        @parts.Msg("object.user_account.email.label")</th>
                                    <td>@userAccount.getMail()</td>
                                </tr>
                                <tr>
                                    <th class="col-md-4">
                                        @parts.Msg("object.user_account.preferred_language.label")</th>
                                    <td>@if(userAccount.getPreferredLanguage() != null) { @framework.services.ServiceStaticAccessor.getMessagesPlugin().getLanguageByCode(userAccount.getPreferredLanguage).getName }</td>
                                </tr>
                                <tr>
                                    <th class="col-md-4">
                                        @parts.Msg("object.user_account.roles.label")</th>
                                    <td>
                                        <ul class="list-unstyled">
                                            @for(systemLevelRoleTypeName <- userAccount.getSystemLevelRoleTypeNames()){
                                               <li><small>@systemLevelRoleTypeName</small></li>
                                            }
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="glyphicons glyphicons-circle-info"></i>&nbsp; @parts.Msg("index.quick_links.title")</h3>
                    </div>
                    <div class="list-group">
                        @restrict(la(as(constants.IMafConstants.PORTFOLIO_ENTRY_SUBMISSION_PERMISSION))){
                            <a class="list-group-item" href="@controllers.core.routes.PortfolioEntryController.createStep1().url">
                                <span class="glyphicons glyphicons-gift"></span> @parts.Msg("index.intake.label") &nbsp;<small><i>@parts.Msg("index.intake.description")</i></small>
                            </a>
                        }
                        @restrict(la(as(constants.IMafConstants.ROADMAP_DISPLAY_PERMISSION))){
                            <a class="list-group-item" href="@controllers.core.routes.RoadmapController.index().url">
                                <span class="glyphicons glyphicons-road"></span> @parts.Msg("index.roadmap.label") &nbsp;<small><i>@parts.Msg("index.roadmap.description")</i></small>
                            </a>
                        }
                        @restrict(la(as(constants.IMafConstants.COCKPIT_DISPLAY_PERMISSION))){
                            <a class="list-group-item" href="@controllers.core.routes.CockpitController.initiatives().url">
                                <span class="glyphicons glyphicons-dashboard"></span> @parts.Msg("index.cockpit.label") &nbsp;<small><i>@parts.Msg("index.cockpit.description")</i></small>
                            </a>
                        }
                        @restrict(la(as(constants.IMafConstants.SEARCH_PERMISSION))){
                            <a class="list-group-item" href="@controllers.core.routes.SearchController.index().url">
                                <span class="glyphicons glyphicons-search"></span> @parts.Msg("index.search.label") &nbsp;<small><i>@parts.Msg("index.search.description")</i></small>
                            </a>
                        }
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>
}
